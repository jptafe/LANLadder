<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>LANLadder</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Icons -->
            <link rel="shortcut icon" href="favicon.ico" />
            
            <link rel="apple-touch-icon" sizes="128x128" href="img/icons/lanladder_128.png" />
            <link rel="apple-touch-icon-precomposed" sizes="128x128" href="img/icons/lanladder_128.png" />

            <link rel="icon" type="image/png" sizes="64x64" href="img/icons/lanladder_64.png">
            <link rel="icon" type="image/png" sizes="32x32" href="img/icons/lanladder_32.png">
            <link rel="icon" type="image/png" sizes="72x72" href="img/icons/lanladder_72.png">

            <meta name="msapplication-square70x70logo" content="img/icons/lanladder_70.png">
            <meta name="msapplication-square150x150logo" content="img/icons/lanladder_150.png">
            <meta name="msapplication-square310x310logo" content="img/icons/lanladder_310.png">
            <meta name="msapplication-wide310x150logo" content="img/icons/lanladder_310.png">
            <meta name="msapplication-TileColor" content="#2e2e2e">

        <!-- UIkit -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.7/css/uikit.min.css" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.7/js/uikit.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.7/js/uikit-icons.min.js"></script>

        <!-- RPG Icons -->
            <link rel="stylesheet" href="css/rpg-awesome.css">

        <!-- Local Customisations -->
            <link rel="stylesheet" href="css/app.css">
            <script src="js/app.js" defer></script>
    </head>
    <body>
        <div class="uk-navbar-container">
            <div class="uk-navbar-left uk-light uk-background-secondary">
                <span uk-toggle="target: #main_nav" type="button"><span uk-icon="icon: menu"></span></span>
                <span id="status_panel"></span>
            </div>
        <div>
        <nav>
            <a href="#main_nav" uk-toggle></a>
            <div id="main_nav" uk-offcanvas="overlay: true">
                <div class="uk-offcanvas-bar">
                <button class="uk-offcanvas-close" type="button" uk-close></button>
                <ul uk-tab="connect: #content_tabs" class="uk-tab-left" id="nav_content_tabs">
                    <li id="menu_login">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="#" aria-expanded="true">
                            <span uk-icon="icon: sign-in"></span>
                            Player Login
                        </a>
                    </li>
                    <li id="menu_register">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="#" aria-expanded="false">
                            <span uk-icon="icon: pencil"></span>
                            Register
                        </a>
                    </li>
                    <li id="menu_addteam">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="#" aria-expanded="false">
                            <span uk-icon="icon: users"></span>
                            Add Team
                        </a>
                    </li>
                    <li id="menu_addladder">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="#" aria-expanded="false">
                            <span uk-icon="icon: calendar"></span>
                            Add Ladder
                        </a>
                    </li>
                    <li id="menu_creatematch">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="#" aria-expanded="false">
                            <span uk-icon="icon: play-circle"></span>
                            Create Match
                        </a>
                    </li>
                    <li id="menu_joinkickteam">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="#" aria-expanded="false">
                            <span uk-icon="icon: users"></span>
                            Manage Teams
                        </a>
                    </li>
                    <li id="menu_destroysession">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="" aria-expanded="false">
                            <span uk-icon="icon: bolt"></span>
                            Destroy PHP Session!
                        </a>
                    </li>
                    <li id="menu_teamlist">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="" aria-expanded="false">
                            <span uk-icon="icon: file-text"></span>
                            Team &amp; Player list
                        </a>
                    </li>
                    <li id="menu_rankings">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="" aria-expanded="false">
                            <span uk-icon="icon: list"></span>
                            Ladder Rankings
                        </a>
                    </li>
                    <li id="menu_matchreport">
                        <a onclick="UIkit.offcanvas(main_nav).hide();" href="" aria-expanded="false">
                            <span uk-icon="icon: microphone"></span>
                            Report match
                        </a>
                    </li>
                    <li id="menu_logout">
                        <a onclick="logoutNow();" href="#" aria-expanded="false">
                            <span uk-icon="icon: sign-out"></span>
                            Logout
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <ul class="uk-dark uk-switcher uk-width-1-1@s uk-width-4-5@m uk-width-3-5@l uk-width-1-2@xl" id="content_tabs">
            <li class="uk-fieldset">
                <form id="form_login" class="uk-width-1-1"> 
                    <legend class="uk-form-legend">Login</legend>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: user"></span>
                        <input type="text" name="username" placeholder="User Name" title="Username Required" class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
                        <input type="password" name="password" placeholder="Password" title="Password Required" 
                            class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: sign-in"></span>
                        <input type="submit" class="uk-button uk-button-large uk-width-1-1" value="Login">
                    </div>
                </form>
            </li>
            <li class="uk-fieldset">
                <form id="form_regplayer" class="uk-width-1-1">
                    <legend class="uk-form-legend">Create Player</legend>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: user"></span>
                        <input type="text" name="name" pattern="[0-9A-Z a-z]{3,}" placeholder="Player Name" onchange="checkExistingUser(this)" class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
                        <input type="password" name="pass" id="pass" pattern=".{8,}" placeholder="Password" title="No less than 8 chars" class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: lock"></span>
                        <input type="password" name="pass2" id="pass2" pattern=".{8,}" placeholder="Password Again" title="No less than 8 chars" class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: location"></span>
                        <select name="seated" class="uk-select" required>
                            <option value="0" selected>Choose Location...</option>
                            <option value="centre">Centre</option>
                            <option value="rear">Rear</option>
                            <option value="front">Front</option>
                            <option value="window">Windows</option>
                            <option value="entry">Entry</option>
                            <option value="stage">Stage</option>
                            <option value="left">Left</option>
                            <option value="right">Right</option>
                            <option value="screen">Screen</option>
                        </select>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: users"></span>
                        <select name="team_id" onfocus="populateAllTeamsInForm(this)" class="uk-select">
                            <option value="0" disabled selected>Choose Team...</option>
                        </select>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: camera"></span>                    
                        <select name="playericon" class="uk-select" oninput="ra_player_icon.setAttribute('class', 'ra ' + this.value)" required>
                            <script type="text/javascript" src="./css/rpg-awesome-menu.js"></script>
                        </select>
                    </div>
                    <div class="uk-inline uk-width-1-1"><h1><i id="ra_player_icon" class="ra"></h1></i></div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: cloud-upload"></span>
                        <input type="submit" value="Create Player" class="uk-button uk-button-large uk-width-1-1">
                    </div>
                </form>
            </li>
            <li class="uk-fieldset">
                <form id="form_addteam" class="uk-width-1-1">
                    <legend class="uk-form-legend">Create Team</legend>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: users"></span>
                        <input type="text" name="teamname" pattern="[0-9A-Z a-z]{3,}" placeholder="Team Name" title="Team Name Alphanumeric" class="uk-input" onchange="checkExistingTeam(this)" required>
                    </div>
                    <div class="uk-inline uk-width-1-4">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: paint-bucket"></span>                    
                        <input type="color" name="teamcolor" pattern="(?!#000000)[\#0-9a-f]{7}" class="uk-input" onchange="ra_icon.setAttribute('style', 'color: ' + this.value)" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: camera"></span>                    
                        <select name="teamicon" class="uk-select" oninput="ra_icon.setAttribute('class', 'ra ' + this.value)" required>
                            <script type="text/javascript" src="./css/rpg-awesome-menu.js"></script>
                        </select>
                    </div>
                    <div class="uk-inline uk-width-1-1"><h1><i id="ra_icon" class="ra">&nbsp;</h1></i></div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: cloud-upload"></span>                    
                        <input type="submit" value="Create Team" class="uk-button uk-button-large uk-width-1-1">
                    </div>
                </form>
            </li>
            <li class="uk-fieldset">
                <form id="form_addladder" class="uk-width-1-1">
                    <legend class="uk-form-legend">Create Ladder</legend>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: desktop"></span>
                        <input type="text" name="game" placeholder="Game Name" pattern="[0-9A-Z a-z]{3,}" class="uk-input" onchange="checkExistingLadder(this)" required> 
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: pencil"></span>
                        <input type="text" name="desc" pattern="[0-9A-Z a-z]{3,}" title="Ladder is the name of the Game" placeholder="Description" class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: users"></span>
                        <input type="number" name="players" placeholder="0" min="1" max="99" pattern="[1-9]\d|[0-9]\d{1,2}" title="playes must be int 1-99" class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-4">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: paint-bucket"></span>
                        <input type="color" name="ladder_color" pattern="(?!#000000)[\#0-9a-f]{7}" title="color is a hex code" class="uk-input" required>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: calendar"></span>                    
                        <input type="datetime-local" min="2019-7-1T00:00:00" max="2022-7-1T00:00:00" name="start_time" class="uk-input" required>
                    </div>
                    <input type="hidden" name="ladder_image" id="ladder_image_filename" value="placeholder.png">
                    <div class="uk-inline uk-width-1-1 js-upload uk-placeholder uk-text-center">
                        <span uk-icon="icon: cloud-upload"></span>
                        <span class="uk-text-middle">Attach png or jpg by dropping them here or</span>
                        <div uk-form-custom>
                            <input type="file" accept="image/png, image/jpeg" name="ladder_image_upload" id="file_upload" title="image is alpha numeric, no spaces">
                            <span class="uk-link">selecting one</span>
                        </div>
                    </div>
                    <progress id="uikitprogressbar" class="uk-progress" value="0" max="100" hidden></progress>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: cloud-upload"></span>                    
                        <input type="submit" value="Create Ladder" class="uk-button uk-button-large uk-width-1-1">
                    </div>
                </form>
            </li>
            <li class="uk-fieldset">
                <form id="form_addmatch" class="uk-width-1-1">
                    <legend class="uk-form-legend">Create Match</legend>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: desktop"></span>                    
                        <select name="ladder_id" onfocus="populateAllLaddersInForm(this)" class="uk-select" required>
                            <option value="0" disabled selected>Choose A Ladder...</option>
                        </select>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: users"></span>   
                        <select name="team_a" id="teamainladder" onfocus="populateAllTeamsInForm(this)" class="uk-select" required>
                            <option value="0" disabled selected>Choose Team A</option>
                        </select>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: users"></span>   
                        <select name="team_b" id="teambinladder" onfocus="populateAllTeamsInForm(this)" class="uk-select" required>
                            <option value="0" disabled selected>Choose Team B</option>
                        </select>
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: calendar"></span>   
                        <input type="datetime-local" min="2019-7-1T00:00:00" max="2022-7-1T00:00:00" name="start_time" class="uk-input" required> 
                    </div>
                    <div class="uk-inline uk-width-1-1">
                        <span class="uk-form-icon uk-form-icon-flip" uk-icon="icon: cloud-upload"></span>   
                        <input type="submit" value="Create Match" class="uk-button uk-button-large uk-width-1-1">
                    </div>
                </form> 
            </li>
            <li class="uk-fieldset">
                <div id="edit_teams_with_players">
                    Edit Team -&gt; player List 
                </div>
            </li>
            <li class="uk-fieldset">
                <form id="form_php_session">
                    <a href="api/ws.php?reqcode=destroy" aria-expanded="false">Destroy PHP Session</a>
                </form>
            </li> 
            <li class="uk-fieldset">
                <div id="teams_with_players">
                    All Team List -&gt; players 
                </div>
            </li>
            <li class="uk-fieldset">
                <div class="" id="panel_ladder_results">
                    All Ladder List -&gt; teams
                </div>
            </li>
            <li class="uk-fieldset">
                <div class="" id="panel_ladder_team_report_form">
                    All Team List -&gt; players 
                </div>
            </li>
            <li class="uk-fieldset">
                <p>Logout Complete</p>
            </li>
        </ul>
        <div id="alert_msg" class="uk-alert-success" hidden uk-alert>
            <p><b>SUCCESS:</b><span id="alert_msg_msg">Message to user</span></p>
        </div>
        <div id="alert_wrn" class="uk-alert-warning" hidden uk-alert>
            <p><b>WARNING:</b><span id="alert_msg_wrn">Message to user</span></p>
        </div>
        <div id="alert_dng" class="uk-alert-danger" hidden uk-alert>
            <p><b>ERROR:</b><span id="alert_msg_dng">Message to user</span></p>
        </div>
<!-- TEMPLATES -->
        <script id="template_ladder_head_played" type="text/template">
            <a class="uk-accordion-title" onclick="getLadderPlayedMatches({{ladderID}})" href="#">
                <span style="color: #{{ladderColor}}">
                    <img width="18" height="18" src="img/{{ladderImage}}">
                    &nbsp;
                </span>
                {{ladderTitle}}
            </a>
        </script>
        <script id="template_ladder_head_unplayed" type="text/template">
            <a class="uk-accordion-title" onclick="getALadderofUnlayedMatches({{ladderID}})" href="#">
                <span style="color: #{{ladderColor}}">
                    <img width="18" height="18" src="img/{{ladderImage}}">
                    &nbsp;
                </span>
                {{ladderTitle}}
            </a>
        </script>
        <script id="template_team_member_list" type="text/template">
            <a class="uk-accordion-title" href="#">
                <span style="color: #{{teamColor}}"> 
                    <i class="ra {{teamImage}}"></i>
                &nbsp;
                </span>
                {{teamTitle}}
            </a>
        </script>
        <script id="template_edit_team_member_list" type="text/template">
            <a class="uk-accordion-title" href="#">
                <span style="color: #{{teamColor}}"> 
                    <i class="ra {{teamImage}}"></i>
                &nbsp;
                </span>
                {{teamTitle}}
            </a>
        </script>
        <script id="template_match_report_form" type="text/template">
            <form class="uk-grid uk-fieldset uk-width-1-1" id="match_report_form_{{matchID}}">
                <div class="uk-width-1-6">
                    {{matchID}}
                    <input type="hidden" name="matchid" value="{{matchID}}">
                </div>
                <div class="uk-width-1-3">
                    <select class="uk-select" name="winning_team" id="match_{{matchID}}_report_winner" 
                        onchange="if(match_{{matchID}}_report_winner.value == {{team_a_id}}) { match_{{matchID}}_report_loser.value = {{team_b_id}}; } else { match_{{matchID}}_report_loser.value = {{team_a_id}}; } if(match_{{matchID}}_report_winner.value == 2) {match_{{matchID}}_report_loser.value = 2}">
                        <option value="2">Tie</option>
                        <option value="{{team_a_id}}" selected>{{team_a_name}}</option>
                        <option value="{{team_b_id}}">{{team_b_name}}</option>
                    </select>
                </div>
                <div class="uk-width-1-3">
                    <select class="uk-select" name="losing_team" id="match_{{matchID}}_report_loser" 
                        onchange="if(match_{{matchID}}_report_loser.value == {{team_a_id}}) { match_{{matchID}}_report_winner.value = {{team_b_id}}; } else { match_{{matchID}}_report_winner.value = {{team_a_id}}; } if(match_{{matchID}}_report_loser.value == 2) {match_{{matchID}}_report_winner.value = 2}">
                        <option value="2">Tie</option>
                        <option value="{{team_b_id}}" selected>{{team_b_name}}</option>
                        <option value="{{team_a_id}}">{{team_a_name}}</option>
                    </select>
                </div>
                <div class="uk-width-1-6">
                    <input class="uk-button" type="submit" name="report" value="report">
                </div>
            </form>
        </script>
    </body>
</html>
